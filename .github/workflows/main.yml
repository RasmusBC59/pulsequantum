# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the main branch
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.
#############################################################################################
      - uses: conda-incubator/setup-miniconda@v1
        with:
          miniconda-version: "latest"
          activate-environment: foo
      - name: Bash
        shell: bash -l {0}
        run: |
          conda info
          conda list
      - name: PowerShell Core
        shell: pwsh
        run: |
          conda info
          conda list
      - name: disable_telemetry
        run: sed -i "s/\(enabled *= *\).*/\1False/" ./pulsequantum/conf/telemetry.ini
        shell: bash
      - name: print_bla
        run: |
         echo "$(pwd)"
         echo "$(ls -a)"
         echo "$($PATH)"
         echo "$(conda env list)" 
      - name: install_package
        run: |
          conda --version &&
          conda env create --file ./environment.yml &&
          echo "env was created" &&
          #  conda init bash &&
          #  echo "init bash" &&
          echo "$(conda env list)"  #&&
          #  conda deactivate base
        shell: bash
      - name: echopath     
        run: echo "$(which python)"
        shell: bash         
      #- name: acti     
        #run: source activate foo   
          #  echo "$(deactivate base)" &&
          #source activate pulsequantum #&&
          #echo "source activate done" &&
          #pip install -r test_requirements.txt &&
          #pip install .
        #shell: bash               
